{% extends "custom_admin/base.html" %}
{% load static %}
{% block title %}Coupons List{% endblock %}
{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h1 style="margin:0;">Coupons</h1>
    <a href="{% url 'admin_coupon_add' %}" 
       style="background-color:#4CAF50; color:white; padding:8px 15px; text-decoration:none; border-radius:5px; font-weight:bold;">
       + Add New Coupon
    </a>
</div>
<table style="width:100%; border-collapse: collapse; font-family: Arial, sans-serif;">
    <thead>
        <tr style="background-color:#f2f2f2; text-align:left;">
            <th style="padding:10px; border-bottom:1px solid #ddd;">#</th>
            <th style="padding:10px; border-bottom:1px solid #ddd;">Code</th>
            <th style="padding:10px; border-bottom:1px solid #ddd;">Discount</th>
            <th style="padding:10px; border-bottom:1px solid #ddd;">Min Purchase</th>
            <th style="padding:10px; border-bottom:1px solid #ddd;">Active</th>
            <th style="padding:10px; border-bottom:1px solid #ddd;">Valid From</th>
            <th style="padding:10px; border-bottom:1px solid #ddd;">Valid To</th>
            <th style="padding:10px; border-bottom:1px solid #ddd;">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for coupon in coupons %}
        <tr style="border-bottom:1px solid #eee; transition: background-color 0.2s;">
            <td style="padding:10px;">{{ forloop.counter }}</td>
            <td style="padding:10px;">{{ coupon.code }}</td>
            <td style="padding:10px;">{{ coupon.discount }}%</td>
            <td style="padding:10px;">
                {% if coupon.min_purchase %}
                    â‚¹{{ coupon.min_purchase }}
                {% else %}
                    None
                {% endif %}
            </td>
            <td style="padding:10px;">
                {% if coupon.is_expired %}
                    <span class="badge bg-danger">Expired</span>
                {% elif not coupon.active %}
                    <span class="badge bg-danger">Blocked</span>
                {% else %}
                    <span class="badge bg-success">Active</span>
                {% endif %}
            </td>
            <td style="padding:10px;">{{ coupon.valid_from|date:"d M Y" }}</td>
            <td style="padding:10px;">{{ coupon.valid_to|date:"d M Y" }}</td>
            <td style="padding:10px;">
                <a href="{% url 'admin_coupon_edit' coupon.id %}" 
                   style="background-color:#2196F3; color:white; padding:5px 10px; border-radius:4px; text-decoration:none; margin-right:5px;">Edit</a>
                <a href="{% url 'admin_coupon_delete' coupon.id %}" 
                   style="background-color:#f44336; color:white; padding:5px 10px; border-radius:4px; text-decoration:none;" 
                   onclick="return confirm('Are you sure you want to delete this coupon?');">Delete</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="8" style="text-align:center; padding:20px;">No coupons available.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<style>
    tbody tr:hover {
        background-color: #f9f9f9;
    }
</style>
{% endblock %}
