{% extends "custom_admin/base.html" %}
{% block content %}
<h2>Product Offers</h2>
<a href="{% url 'admin_add_product_offer' %}" class="btn btn-primary">+ Add Product Offer</a>
<table class="table table-bordered mt-3">
    <tr>
        <th>Product</th>
        <th>Discount %</th>
        <th>Start</th>
        <th>End</th>
        <th>Status</th>
        <th>Actions</th>
    </tr>
    {% now "Y-m-d" as today_str %}
    {% for offer in offers %}
    <tr>
        <td>{{ offer.product.name }}</td>
        <td>{{ offer.discount_percent }}%</td>
        <td>{{ offer.start_date }}</td>
        <td>{{ offer.end_date }}</td>
        <td>
            {% if offer.is_expired %}
                <span class="badge bg-danger">Expired</span>
            {% elif offer.active == False %}
                <span class="badge bg-danger">blocked</span>
            {% else %}
                <span class="badge bg-success">Active</span>
            {% endif %}
        </td>
        <td>
            <a onclick="return confirm('Are you sure you want to delete this offer?');" href="{% url 'admin_delete_product_offer' offer.id %}" class="btn btn-danger btn-sm">Delete</a>
            <a href="{% url 'admin_product_offer_edit' offer.product.product_id %}" class="btn btn-warning btn-sm">Edit</a>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
