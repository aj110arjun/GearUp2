{% extends "custom_admin/base.html" %}
{% block content %}
<div class="container my-5">
    <h2>Order #{{ order.id }}</h2>
    <p><strong>User:</strong> {{ order.user.username }}</p>
    <p><strong>Email:</strong> {{ order.user.email }}</p>
    <p><strong>Placed on:</strong> {{ order.created_at|date:"M d, Y H:i" }}</p>
    <hr>

    <h5>Shipping Address</h5>
    <p>
        {{ order.address.full_name }} <br>
        {{ order.address.street }} <br>
        {{ order.address.city }}, {{ order.address.state }} - {{ order.address.zipcode }} <br>
        {{ order.address.country }} <br>
        Phone: {{ order.address.phone }}
    </p>
    <hr>

    <h5>Items</h5>
    <ul class="list-group mb-3">
        {% for item in order.items.all %}
            <li class="list-group-item d-flex justify-content-between">
                {{ item.variant.product.name }} ({{ item.variant.color }}/{{ item.variant.size }}) x{{ item.quantity }}
                <span>${{ item.subtotal }}</span>
            </li>
        {% endfor %}
    </ul>

    <h4>Total: ${{ order.total_price }}</h4>
    <hr>

    <h5>Status: 
        <span class="badge 
            {% if order.status == 'Pending' %} bg-warning
            {% elif order.status == 'Shipped' %} bg-info
            {% elif order.status == 'Delivered' %} bg-success
            {% elif order.status == 'Cancelled' %} bg-danger
            {% endif %}">
            {{ order.status }}
        </span>
    </h5>

    <div class="mt-3">
        <a href="{% url 'update_order_status' order.id 'Pending' %}" class="btn btn-warning btn-sm">Pending</a>
        <a href="{% url 'update_order_status' order.id 'Shipped' %}" class="btn btn-info btn-sm">Shipped</a>
        <a href="{% url 'update_order_status' order.id 'Delivered' %}" class="btn btn-success btn-sm">Delivered</a>
        <a href="{% url 'update_order_status' order.id 'Cancelled' %}" class="btn btn-danger btn-sm">Cancelled</a>
    </div>
</div>
{% endblock %}
