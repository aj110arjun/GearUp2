{% extends "custom_admin/base.html" %}
{% block content %}
<div class="max-w-6xl mx-auto my-10 px-4">
    <h2 class="text-2xl font-semibold text-gray-800 mb-6">All Orders</h2>
    <hr class="mb-6 border-gray-300">

    {% if orders %}
    <div class="overflow-x-auto">
        <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
            <thead class="bg-gray-800 text-white">
                <tr>
                    <th class="px-4 py-2 text-left">Order #</th>
                    <th class="px-4 py-2 text-left">User</th>
                    <th class="px-4 py-2 text-left">Total Price</th>
                    <th class="px-4 py-2 text-left">Placed On</th>
                    <th class="px-4 py-2 text-center">Actions</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-200">
                {% for order in orders %}
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-2">
                        <a href="{% url 'admin_order_detail' order.order_id %}" class="text-indigo-600 hover:underline">
                            #{{ order.order_code }}
                        </a>
                    </td>
                    <td class="px-4 py-2">{{ order.user.email }}</td>
                    <td class="px-4 py-2">â‚¹{{ order.total_price }}</td>
                    <td class="px-4 py-2">{{ order.created_at|date:"d M Y" }}</td>
                    <td class="px-4 py-2 text-center">
                        <a href="{% url 'admin_order_detail' order.order_id %}" class="inline-block px-3 py-1 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition text-sm">
                            View
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Pagination Controls -->
    <div class="mt-6 flex justify-center">
        <nav class="inline-flex space-x-1">
            {% if orders.has_previous %}
                <a href="?page={{ orders.previous_page_number }}{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}" 
                   class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">Previous</a>
            {% endif %}

            {% for num in orders.paginator.page_range %}
                <a href="?page={{ num }}{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}" 
                   class="px-3 py-1 rounded {% if orders.number == num %}bg-indigo-600 text-white{% else %}bg-gray-200 hover:bg-gray-300{% endif %}">
                    {{ num }}
                </a>
            {% endfor %}

            {% if orders.has_next %}
                <a href="?page={{ orders.next_page_number }}{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}" 
                   class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">Next</a>
            {% endif %}
        </nav>
    </div>

    {% else %}
    <p class="text-gray-500 text-center mt-6">No orders found.</p>
    {% endif %}
</div>
{% endblock %}
