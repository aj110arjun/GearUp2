{% extends 'custom_admin/base.html' %}
{% load static %}

{% block title %}Product Detail - {{ product.name }}{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto bg-white shadow-md rounded-2xl p-8 mt-8">
  <!-- Product Header -->
  <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
    <h2 class="text-3xl font-semibold text-gray-800">{{ product.name }}</h2>
    <div class="flex gap-2 mt-3 md:mt-0">
      <a href="{% url 'admin_product_edit' product.product_id %}"
         class="px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition">Edit</a>

      {% if product.is_active %}
        <a href="{% url 'admin_product_toggle_status' product.product_id %}"
           class="px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition">Block</a>
      {% else %}
        <a href="{% url 'admin_product_toggle_status' product.product_id %}"
           class="px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition">Unblock</a>
      {% endif %}

      <a href="{% url 'admin_product_list' %}"
         class="px-4 py-2 bg-gray-200 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-300 transition">Back</a>
    </div>
  </div>

  <hr class="mb-6">

  <!-- Product Info Section -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
    <!-- Main Image -->
    <div>
      {% if product.image %}
        <img src="{{ product.image.url }}"
             alt="{{ product.name }}"
             class="rounded-xl shadow-md w-full max-h-[320px] object-contain hover:scale-105 transition-transform duration-200">
      {% else %}
        <div class="bg-gray-100 h-64 flex items-center justify-center text-gray-500 rounded-lg">
          No Image
        </div>
      {% endif %}
    </div>

    <!-- Product Details -->
    <div class="md:col-span-2 space-y-3">
      <p class="text-gray-700"><span class="font-semibold text-gray-800">Brand:</span> {{ product.brand }}</p>
      <p class="text-gray-700"><span class="font-semibold text-gray-800">Description:</span> {{ product.description }}</p>
      <p class="text-gray-700"><span class="font-semibold text-gray-800">Category:</span> {{ product.category.name }}</p>
      <p class="text-gray-700 flex items-center gap-2">
        <span class="font-semibold text-gray-800">Status:</span>
        {% if product.is_active %}
          <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">Active</span>
        {% else %}
          <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">Inactive</span>
        {% endif %}
      </p>
    </div>
  </div>

  <!-- Additional Images -->
  {% if additional_images %}
  <div class="mb-8">
    <h3 class="text-xl font-semibold text-gray-800 mb-3">Additional Images</h3>
    <div class="flex flex-wrap gap-3">
      {% for img in additional_images %}
        <img src="{{ img.image.url }}"
             alt="Additional Image"
             class="w-28 h-28 object-cover rounded-lg shadow-sm border border-gray-200 hover:scale-105 transition-transform duration-200">
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- Variants -->
  {% if variants %}
  <div class="mb-8">
    <h3 class="text-xl font-semibold text-gray-800 mb-3">Variants</h3>
    <div class="overflow-x-auto border border-gray-200 rounded-lg">
      <table class="min-w-full divide-y divide-gray-200 text-sm text-gray-700">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2 text-left font-medium">Color</th>
            <th class="px-4 py-2 text-left font-medium">Size</th>
            <th class="px-4 py-2 text-left font-medium">Price</th>
            <th class="px-4 py-2 text-left font-medium">Stock</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100">
          {% for variant in variants %}
          <tr class="hover:bg-gray-50">
            <td class="px-4 py-2">{{ variant.color }}</td>
            <td class="px-4 py-2">{{ variant.size }}</td>
            <td class="px-4 py-2">â‚¹{{ variant.price }}</td>
            <td class="px-4 py-2">{{ variant.stock }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
