{% extends 'custom_admin/base.html' %}
{% load static %}

{% block title %}Product Detail - {{ product.name }}{% endblock %}

{% block content %}
<div class="container my-5">
    <h2>{{ product.name }}</h2>
    <hr>

    <div class="row mb-4">
        <!-- Main Image -->
        <div class="col-md-4">
            {% if product.image %}
                <img src="{{ product.image.url }}" class="img-fluid img-thumbnail" style="max-height:300px;">
            {% endif %}
        </div>

        <!-- Product Details -->
        <div class="col-md-8">
            {% comment %} <p><strong>Category:</strong> {{ product.category.name if product.category }}</p> {% endcomment %}
            <p><strong>Brand:</strong> {{ product.brand }}</p>
            <p><strong>Description:</strong> {{ product.description }}</p>
            <p>
                <strong>Status:</strong> 
                {% if product.is_active %}
                    <span class="badge bg-success">Active</span>
                {% else %}
                    <span class="badge bg-danger">Inactive</span>
                {% endif %}
            </p>
            <p><strong>Category:</strong> {{ product.category.name }}</p>

        </div>
    </div>

    <!-- Additional Images -->
    {% if additional_images %}
    <div class="mb-4">
        <h4>Additional Images</h4>
        <div class="d-flex flex-wrap gap-2">
            {% for img in additional_images %}
                <img src="{{ img.image.url }}" class="img-thumbnail" style="width:120px; height:120px; object-fit:cover;">
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- Product Variants -->
    {% if variants %}
    <div class="mb-4">
        <h4>Variants</h4>
        <table class="table table-bordered table-striped">
            <thead class="table-light">
                <tr>
                    <th>Color</th>
                    <th>Size</th>
                    <th>Price</th>
                    <th>Stock</th>
                </tr>
            </thead>
            <tbody>
                {% for variant in variants %}
                <tr>
                    <td>{{ variant.color }}</td>
                    <td>{{ variant.size }}</td>
                    <td>{{ variant.price }}</td>
                    <td>{{ variant.stock }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

    <div class="mt-3">
        <a href="{% url 'admin_product_edit' product.product_id %}" class="btn btn-primary">Edit Product</a>
        {% if product.is_active %}
            <a href="{% url 'admin_product_toggle_status' product.product_id %}" class="btn btn-danger">
                Block Product
            </a>
        {% else %}
            <a href="{% url 'admin_product_toggle_status' product.product_id %}" class="btn btn-success">
                Unblock Product
            </a>
        {% endif %}
        <a href="{% url 'admin_product_list' %}" class="btn btn-secondary">Back to List</a>
    </div>
</div>

<style>
    .img-thumbnail {
        border-radius: 6px;
        transition: transform 0.2s ease;
    }
    .img-thumbnail:hover {
        transform: scale(1.05);
    }
</style>
{% endblock %}
